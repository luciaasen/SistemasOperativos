\hypertarget{semaforos_8c}{}\section{semaforos.\+c File Reference}
\label{semaforos_8c}\index{semaforos.\+c@{semaforos.\+c}}


fichero que contiene la implementacion de la libreria de semaforos  


{\ttfamily \#include $<$sys/sem.\+h$>$}\\*
{\ttfamily \#include $<$sys/shm.\+h$>$}\\*
{\ttfamily \#include $<$stdio.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include \char`\"{}semaforos.\+h\char`\"{}}\\*
Include dependency graph for semaforos.\+c\+:
% FIG 0
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{semaforos_8c_a16b16dd895b5f4cbe48f1ac8977e8b35}{Crear\+\_\+\+Semaforo} (key\+\_\+t key, int size, int $\ast$semid)
\item 
int \hyperlink{semaforos_8c_a4af104b0ed37e6ae0289a1059bc6e990}{Inicializar\+\_\+\+Semaforo} (int semid, unsigned short $\ast$array)
\item 
int \hyperlink{semaforos_8c_a731339337960a681efa435a10f12c312}{Borrar\+\_\+\+Semaforo} (int semid)
\item 
int \hyperlink{semaforos_8c_a5b66b4638907883bbc52d7b4f8b71365}{operacion\+Semaforo} (int id, int num\+\_\+sem, int undo, int op)
\item 
int \hyperlink{semaforos_8c_a883244cd3b83c42cda23687da1b63369}{Down\+\_\+\+Semaforo} (int id, int num\+\_\+sem, int undo)
\item 
int \hyperlink{semaforos_8c_a2d5e735aecee4f493898b3d4ebab1a10}{Up\+\_\+\+Semaforo} (int id, int num\+\_\+sem, int undo)
\item 
int \hyperlink{semaforos_8c_a56d1fc96980a85ebdc7fce337e64ba1d}{operacion\+Multiple\+Semaforo} (int id, int size, int undo, int $\ast$active, int op)
\item 
int \hyperlink{semaforos_8c_ab375ebfc38acbdced46e062a689d5fad}{Down\+Multiple\+\_\+\+Semaforo} (int id, int size, int undo, int $\ast$active)
\item 
int \hyperlink{semaforos_8c_a943759695f018d64a94b8a2c49308092}{Up\+Multiple\+\_\+\+Semaforo} (int id, int size, int undo, int $\ast$active)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
fichero que contiene la implementacion de la libreria de semaforos 

\begin{DoxyAuthor}{Author}
Lucia Asencio y Rodrigo de Pool 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
31-\/3-\/2017 
\end{DoxyDate}


\subsection{Function Documentation}
\index{semaforos.\+c@{semaforos.\+c}!Borrar\+\_\+\+Semaforo@{Borrar\+\_\+\+Semaforo}}
\index{Borrar\+\_\+\+Semaforo@{Borrar\+\_\+\+Semaforo}!semaforos.\+c@{semaforos.\+c}}
\subsubsection[{\texorpdfstring{Borrar\+\_\+\+Semaforo(int semid)}{Borrar_Semaforo(int semid)}}]{\setlength{\rightskip}{0pt plus 5cm}int Borrar\+\_\+\+Semaforo (
\begin{DoxyParamCaption}
\item[{int}]{semid}
\end{DoxyParamCaption}
)}\hypertarget{semaforos_8c_a731339337960a681efa435a10f12c312}{}\label{semaforos_8c_a731339337960a681efa435a10f12c312}
Borra un array de semaforos 
\begin{DoxyParams}{Parameters}
{\em semid} & identificador del array \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
devuelve OK si todo correcto, y E\+R\+R\+OR en caso de error 
\end{DoxyReturn}
\index{semaforos.\+c@{semaforos.\+c}!Crear\+\_\+\+Semaforo@{Crear\+\_\+\+Semaforo}}
\index{Crear\+\_\+\+Semaforo@{Crear\+\_\+\+Semaforo}!semaforos.\+c@{semaforos.\+c}}
\subsubsection[{\texorpdfstring{Crear\+\_\+\+Semaforo(key\+\_\+t key, int size, int $\ast$semid)}{Crear_Semaforo(key_t key, int size, int *semid)}}]{\setlength{\rightskip}{0pt plus 5cm}int Crear\+\_\+\+Semaforo (
\begin{DoxyParamCaption}
\item[{key\+\_\+t}]{key, }
\item[{int}]{size, }
\item[{int $\ast$}]{semid}
\end{DoxyParamCaption}
)}\hypertarget{semaforos_8c_a16b16dd895b5f4cbe48f1ac8977e8b35}{}\label{semaforos_8c_a16b16dd895b5f4cbe48f1ac8977e8b35}
Crea un nuevo semaforo con el key dado y del tamanio indicado. Se inicializan los valores a 0 de todos los semaforos. 
\begin{DoxyParams}{Parameters}
{\em key} & clave para inicializar el semaforo \\
\hline
{\em size} & cantidad de semaforos que se quieren \\
\hline
{\em semid} & puntero a entero donde se guarda el identificador del array de semaforos \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
devuelve un 0 si el semaforo ya estaba creado 1 si se ha creado. Si se creo el semaforo en semid se guarda su Identificador Si ya estaba creado y no hubo error se devuelve el identificador, en este caso los valores del semaforo no son cambiados Si no se logra crear el semafoto devuelve E\+R\+R\+OR en semid 
\end{DoxyReturn}
\index{semaforos.\+c@{semaforos.\+c}!Down\+\_\+\+Semaforo@{Down\+\_\+\+Semaforo}}
\index{Down\+\_\+\+Semaforo@{Down\+\_\+\+Semaforo}!semaforos.\+c@{semaforos.\+c}}
\subsubsection[{\texorpdfstring{Down\+\_\+\+Semaforo(int id, int num\+\_\+sem, int undo)}{Down_Semaforo(int id, int num_sem, int undo)}}]{\setlength{\rightskip}{0pt plus 5cm}int Down\+\_\+\+Semaforo (
\begin{DoxyParamCaption}
\item[{int}]{id, }
\item[{int}]{num\+\_\+sem, }
\item[{int}]{undo}
\end{DoxyParamCaption}
)}\hypertarget{semaforos_8c_a883244cd3b83c42cda23687da1b63369}{}\label{semaforos_8c_a883244cd3b83c42cda23687da1b63369}
Hace down a un semaforo 
\begin{DoxyParams}{Parameters}
{\em id} & identificador de array de semaforos \\
\hline
{\em num\+\_\+sem} & numero de semaforo dentro del array \\
\hline
{\em undo} & flag que se quiere agregar (U\+N\+DO flag recomendable) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
E\+R\+R\+OR en caso de error, OK si todo correcto 
\end{DoxyReturn}
\index{semaforos.\+c@{semaforos.\+c}!Down\+Multiple\+\_\+\+Semaforo@{Down\+Multiple\+\_\+\+Semaforo}}
\index{Down\+Multiple\+\_\+\+Semaforo@{Down\+Multiple\+\_\+\+Semaforo}!semaforos.\+c@{semaforos.\+c}}
\subsubsection[{\texorpdfstring{Down\+Multiple\+\_\+\+Semaforo(int id, int size, int undo, int $\ast$active)}{DownMultiple_Semaforo(int id, int size, int undo, int *active)}}]{\setlength{\rightskip}{0pt plus 5cm}int Down\+Multiple\+\_\+\+Semaforo (
\begin{DoxyParamCaption}
\item[{int}]{id, }
\item[{int}]{size, }
\item[{int}]{undo, }
\item[{int $\ast$}]{active}
\end{DoxyParamCaption}
)}\hypertarget{semaforos_8c_ab375ebfc38acbdced46e062a689d5fad}{}\label{semaforos_8c_ab375ebfc38acbdced46e062a689d5fad}
Hace down sobre un conjunto de semaforos. 
\begin{DoxyParams}{Parameters}
{\em id} & identificador del array de semaforos \\
\hline
{\em size} & tamanio del array active \\
\hline
{\em undo} & flag a agregarle a la operacion \\
\hline
{\em active} & array con el conjunto de semaforos sobre el que se hace down \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
E\+R\+R\+OR si hubo un error al hacer down en algun semaforo, OK en caso de que todo fue correctamente 
\end{DoxyReturn}
\index{semaforos.\+c@{semaforos.\+c}!Inicializar\+\_\+\+Semaforo@{Inicializar\+\_\+\+Semaforo}}
\index{Inicializar\+\_\+\+Semaforo@{Inicializar\+\_\+\+Semaforo}!semaforos.\+c@{semaforos.\+c}}
\subsubsection[{\texorpdfstring{Inicializar\+\_\+\+Semaforo(int semid, unsigned short $\ast$array)}{Inicializar_Semaforo(int semid, unsigned short *array)}}]{\setlength{\rightskip}{0pt plus 5cm}int Inicializar\+\_\+\+Semaforo (
\begin{DoxyParamCaption}
\item[{int}]{semid, }
\item[{unsigned short $\ast$}]{array}
\end{DoxyParamCaption}
)}\hypertarget{semaforos_8c_a4af104b0ed37e6ae0289a1059bc6e990}{}\label{semaforos_8c_a4af104b0ed37e6ae0289a1059bc6e990}
Iniciliaza el semaforo a los valores indicados 
\begin{DoxyParams}{Parameters}
{\em semid} & id del semaforo \\
\hline
{\em array} & array de valores a asignar al semaforo \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
OK si no hubo errores, E\+R\+R\+OR si los hubo 
\end{DoxyReturn}
\index{semaforos.\+c@{semaforos.\+c}!operacion\+Multiple\+Semaforo@{operacion\+Multiple\+Semaforo}}
\index{operacion\+Multiple\+Semaforo@{operacion\+Multiple\+Semaforo}!semaforos.\+c@{semaforos.\+c}}
\subsubsection[{\texorpdfstring{operacion\+Multiple\+Semaforo(int id, int size, int undo, int $\ast$active, int op)}{operacionMultipleSemaforo(int id, int size, int undo, int *active, int op)}}]{\setlength{\rightskip}{0pt plus 5cm}int operacion\+Multiple\+Semaforo (
\begin{DoxyParamCaption}
\item[{int}]{id, }
\item[{int}]{size, }
\item[{int}]{undo, }
\item[{int $\ast$}]{active, }
\item[{int}]{op}
\end{DoxyParamCaption}
)}\hypertarget{semaforos_8c_a56d1fc96980a85ebdc7fce337e64ba1d}{}\label{semaforos_8c_a56d1fc96980a85ebdc7fce337e64ba1d}
Funcion privada que generaliza el comportamiento de Down\+Multiple\+\_\+\+Semaforo y Up\+Multiple\+\_\+\+Semaforo. Se le pasa -\/1 si se quiere actuar como Down\+Multiple\+\_\+\+Semaforo y 1 si se quiere actuar como Up\+Multiple\+\_\+\+Semaforo \index{semaforos.\+c@{semaforos.\+c}!operacion\+Semaforo@{operacion\+Semaforo}}
\index{operacion\+Semaforo@{operacion\+Semaforo}!semaforos.\+c@{semaforos.\+c}}
\subsubsection[{\texorpdfstring{operacion\+Semaforo(int id, int num\+\_\+sem, int undo, int op)}{operacionSemaforo(int id, int num_sem, int undo, int op)}}]{\setlength{\rightskip}{0pt plus 5cm}int operacion\+Semaforo (
\begin{DoxyParamCaption}
\item[{int}]{id, }
\item[{int}]{num\+\_\+sem, }
\item[{int}]{undo, }
\item[{int}]{op}
\end{DoxyParamCaption}
)}\hypertarget{semaforos_8c_a5b66b4638907883bbc52d7b4f8b71365}{}\label{semaforos_8c_a5b66b4638907883bbc52d7b4f8b71365}
Funcion privada que nos sirve para generalizar el codigo de down y up de un semaforo El unico cambio es que op es -\/1 y si es down y 1 si es up. Devuelve E\+R\+R\+OR si hubo error o OK en caso de no haberlo \index{semaforos.\+c@{semaforos.\+c}!Up\+\_\+\+Semaforo@{Up\+\_\+\+Semaforo}}
\index{Up\+\_\+\+Semaforo@{Up\+\_\+\+Semaforo}!semaforos.\+c@{semaforos.\+c}}
\subsubsection[{\texorpdfstring{Up\+\_\+\+Semaforo(int id, int num\+\_\+sem, int undo)}{Up_Semaforo(int id, int num_sem, int undo)}}]{\setlength{\rightskip}{0pt plus 5cm}int Up\+\_\+\+Semaforo (
\begin{DoxyParamCaption}
\item[{int}]{id, }
\item[{int}]{num\+\_\+sem, }
\item[{int}]{undo}
\end{DoxyParamCaption}
)}\hypertarget{semaforos_8c_a2d5e735aecee4f493898b3d4ebab1a10}{}\label{semaforos_8c_a2d5e735aecee4f493898b3d4ebab1a10}
Hace up a un semaforo 
\begin{DoxyParams}{Parameters}
{\em id} & identificador de array de semaforos \\
\hline
{\em num\+\_\+sem} & numero de semaforo dentro del array \\
\hline
{\em undo} & flag que se quiere agregar (U\+N\+DO flag recomendable) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
E\+R\+R\+OR en caso de error, OK si todo correcto 
\end{DoxyReturn}
\index{semaforos.\+c@{semaforos.\+c}!Up\+Multiple\+\_\+\+Semaforo@{Up\+Multiple\+\_\+\+Semaforo}}
\index{Up\+Multiple\+\_\+\+Semaforo@{Up\+Multiple\+\_\+\+Semaforo}!semaforos.\+c@{semaforos.\+c}}
\subsubsection[{\texorpdfstring{Up\+Multiple\+\_\+\+Semaforo(int id, int size, int undo, int $\ast$active)}{UpMultiple_Semaforo(int id, int size, int undo, int *active)}}]{\setlength{\rightskip}{0pt plus 5cm}int Up\+Multiple\+\_\+\+Semaforo (
\begin{DoxyParamCaption}
\item[{int}]{id, }
\item[{int}]{size, }
\item[{int}]{undo, }
\item[{int $\ast$}]{active}
\end{DoxyParamCaption}
)}\hypertarget{semaforos_8c_a943759695f018d64a94b8a2c49308092}{}\label{semaforos_8c_a943759695f018d64a94b8a2c49308092}
Hace up sobre un conjunto de semaforos. 
\begin{DoxyParams}{Parameters}
{\em id} & identificador del array de semaforos \\
\hline
{\em size} & tamanio del array active \\
\hline
{\em undo} & flag a agregarle a la operacion \\
\hline
{\em active} & array con el conjunto de semaforos sobre el que se hace down \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
E\+R\+R\+OR si hubo un error al hacer up en algun semaforo, OK en caso de que todo fue correctamente 
\end{DoxyReturn}
